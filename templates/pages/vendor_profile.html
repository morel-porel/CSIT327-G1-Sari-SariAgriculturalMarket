<!-- templates/pages/vendor_profile.html -->
{% extends 'base.html' %}
{% load static %}

{% block css %}
    <link rel="stylesheet" href="{% static 'css/consumer_profile.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Song+Myung&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="profile-container">
    <aside class="sidebar">
        <nav>
            <ul>
                <li><a href="{% url 'profile' %}">My Account</a></li>
                <li><a href="#">Addresses</a></li>
                <li><a href="#">Password</a></li>
                <li><a href="#">Notification</a></li>
                <li><a href="#">Delete Account</a></li>
                <li><a href="{% url 'logout' %}">Logout</a></li>
                {% if not request.user.vendorprofile %}
                <li><a href="{% url 'vendor_signup' %}" class="vendor-link">Be a Vendor!</a></li>
                {% else %}
                <li class="active"><a href="{% url 'vendor_profile' %}" class="vendor-link">Manage Vendor Profile</a></li>
                {% endif %}
            </ul>
        </nav>
    </aside>
    <div class="main-content">
        <div class="form-box">
            <h1>Edit Your Vendor Profile</h1>
            <p>View and manage your vendor profile.</p>
            <!-- IMPORTANT: enctype is required for file uploads -->
            <form method="post" enctype="multipart/form-data" class="profile-form">
                {% csrf_token %}
                <div class="profile-picture-section">
                    {% if form.instance.profile_image %}
                        <img src="{{ form.instance.profile_image.url }}" alt="Profile Avatar" class="profile-avatar">
                    {% else %}
                        <!-- You can have a default placeholder image here -->
                        <img src="{% static 'icons/placeholder.png' %}" alt="Profile Avatar" class="profile-avatar">
                    {% endif %}
                    <div>
                        <!-- Render the image upload field -->
                        {{ form.profile_image.label_tag }}
                        {{ form.profile_image }}
                        {{ form.profile_image.errors }}
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        {{ form.shop_name.label_tag }}
                        {{ form.shop_name }}
                        {{ form.shop_name.errors }}
                    </div>
                    <div class="form-group">
                        {{ form.contact_number.label_tag }}
                        {{ form.contact_number }}
                        {{ form.contact_number.errors }}
                    </div>
                    <div class="form-group">
                        {{ form.business_permit_number.label_tag }}
                        {{ form.business_permit_number }}
                        {{ form.business_permit_number.errors }}
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-save">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}