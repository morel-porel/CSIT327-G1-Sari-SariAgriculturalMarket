{% extends 'base.html' %}
{% load static %}

{% block css %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/notification_list.css' %}">
    <style>
        body {
            margin-bottom: 0 !important;
        }
        footer, .footer {
            display: none !important;
        }
        /* Hide search bar on this page */
        .search-bar {
            visibility: hidden;
        }
    </style>
{% endblock %}

{% block content %}
<div class="notification-page-wrapper">
    <div class="notification-container-main">
        <h2 class="page-title">Your Notifications</h2>
        
        {% if notifications %}
            <ul class="notification-list">
                {% for notification in notifications %}
                    {% with msg_lower=notification.message|lower %}
                        
                        <li class="notification-item {% if not notification.is_read %}unread{% endif %} 
                            {% if 'warning' in msg_lower or 'flagged' in msg_lower %}
                                type-warning
                            {% elif 'new message' in msg_lower %}
                                type-message
                            {% elif 'congratulations' in msg_lower or 'approved' in msg_lower or 'success' in msg_lower %}
                                type-success
                            {% else %}
                                type-info
                            {% endif %}">
                            
                            <div class="icon-section">
                                {% if 'warning' in msg_lower or 'flagged' in msg_lower %}
                                    <img src="{% static 'icons/warning.png' %}" alt="Warning" class="alert-icon">
                                {% elif 'new message' in msg_lower %}
                                    <img src="{% static 'icons/message.png' %}" alt="Message" class="alert-icon">
                                {% elif 'congratulations' in msg_lower or 'approved' in msg_lower or 'success' in msg_lower %}
                                    <img src="{% static 'icons/verified.png' %}" alt="Success" class="alert-icon">
                                {% else %}
                                    <img src="{% static 'icons/notification.png' %}" alt="Info" class="alert-icon">
                                {% endif %}
                            </div>

                            <div class="content-section">
                                {% if notification.link %}
                                    <a href="{{ notification.link }}" class="notification-link">
                                        <p class="notification-message">{{ notification.message }}</p>
                                    </a>
                                {% else %}
                                    <p class="notification-message">
                                        {{ notification.message }}
                                    </p>
                                {% endif %}
                                <small class="notification-timestamp">
                                    {{ notification.timestamp|timesince }} ago
                                </small>
                            </div>
                        </li>
                    
                    {% endwith %}
                {% endfor %}
            </ul>
        {% else %}
            <div class="no-notifications">
                <img src="{% static 'icons/notification.png' %}" style="width: 60px; opacity: 0.2; margin-bottom: 15px; filter: grayscale(1);">
                <p>You're all caught up! No new notifications.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}